{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Vue from \"vue\";\nimport Vuex from 'vuex';\nimport products from \"@/data/products\";\nimport axios from \"axios\";\nimport { API_BASE_URL } from \"@/config\";\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    cartProducts: [{\n      productId: 1,\n      amount: 2\n    }],\n    userAccessKey: null,\n    cartProductsData: []\n  },\n  mutations: {\n    addProductToCart(state, {\n      productId,\n      amount\n    }) {\n      const item = state.cartProducts.find(item => item.productId === productId);\n      if (item) {\n        item.amount += amount;\n      } else {\n        state.cartProducts.push({\n          productId,\n          amount\n        });\n      }\n    },\n    updateCartProductAmount(state, {\n      productId,\n      amount\n    }) {\n      const item = state.cartProducts.find(item => item.productId === productId);\n      if (item) {\n        item.amount = amount;\n      }\n    },\n    deleteCartProduct(state, productId) {\n      state.cartProducts = state.cartProducts.filter(item => item.productId !== productId);\n    },\n    updateUserAccessKey(state, accessKey) {\n      state.userAccessKey = accessKey;\n    },\n    updateCartProductsData(state, items) {\n      state.cartProductsData = items;\n    }\n  },\n  getters: {\n    cartDetailProducts(state) {\n      return state.cartProducts.map(item => {\n        return {\n          ...item,\n          product: products.find(p => p.id === item.productId)\n        };\n      });\n    },\n    cartTotalPrice(state, getters) {\n      return getters.cartDetailProducts.reduce((acc, item) => item.product.price * item.amount + acc, 0);\n    }\n  },\n  actions: {\n    loadCart(context) {\n      axios.get(API_BASE_URL + '/api/baskets', {\n        userAccessKey: context.state.userAccessKey\n      }).then(response => {\n        if (!context.state.userAccessKey) {\n          localStorage.setItem('userAccessKey', response.data.user.accessKey);\n          context.commit('updateUserAccessKey', response.data.user.accessKey);\n        }\n        context.commit('updateCartProductsData', response.data.items);\n      });\n    }\n  }\n});","map":{"version":3,"names":["Vue","Vuex","products","axios","API_BASE_URL","use","Store","state","cartProducts","productId","amount","userAccessKey","cartProductsData","mutations","addProductToCart","item","find","push","updateCartProductAmount","deleteCartProduct","filter","updateUserAccessKey","accessKey","updateCartProductsData","items","getters","cartDetailProducts","map","product","p","id","cartTotalPrice","reduce","acc","price","actions","loadCart","context","get","then","response","localStorage","setItem","data","user","commit"],"sources":["/run/media/rasmus/Files/code/portfolio/Vue3_Internet-Shop/src/store/index.js"],"sourcesContent":["import Vue from \"vue\";\nimport Vuex from 'vuex'\nimport products from \"@/data/products\";\nimport axios from \"axios\";\nimport { API_BASE_URL } from \"@/config\";\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n    state: {\n        cartProducts: [\n            {productId: 1, amount: 2}\n        ],\n        userAccessKey: null,\n        cartProductsData: []\n    },\n    mutations: {\n        addProductToCart(state, {productId, amount}) {\n            const item = state.cartProducts.find(item => item.productId === productId)\n            if (item) {\n                item.amount += amount\n            }\n            else {\n                state.cartProducts.push({\n                    productId,\n                    amount\n                })\n            }\n            \n        },\n        updateCartProductAmount(state, {productId, amount}) {\n            const item = state.cartProducts.find(item => item.productId === productId)\n            if (item) {\n                item.amount = amount\n            }\n        },\n        deleteCartProduct(state, productId) {\n            state.cartProducts = state.cartProducts.filter(item => item.productId !== productId)\n        },\n        updateUserAccessKey(state, accessKey) {\n            state.userAccessKey = accessKey\n        },\n        updateCartProductsData(state, items) {\n            state.cartProductsData = items\n        }\n    },\n    getters: {\n        cartDetailProducts(state) {\n            return state.cartProducts.map(item => {\n                return {\n                    ...item,\n                    product: products.find(p => p.id === item.productId)\n                }\n            })\n        },\n        cartTotalPrice(state, getters) {\n            return getters.cartDetailProducts.reduce((acc, item) => (item.product.price * item.amount) + acc, 0)\n        }\n    },\n    actions: {\n        loadCart(context) {\n            axios\n                .get(API_BASE_URL + '/api/baskets', {\n                    userAccessKey: context.state.userAccessKey\n                })\n                .then(response => {\n                    if (!context.state.userAccessKey) {\n                        localStorage.setItem('userAccessKey', response.data.user.accessKey)\n                        context.commit('updateUserAccessKey', response.data.user.accessKey)\n                    }\n                    context.commit('updateCartProductsData', response.data.items)\n                })\n        }\n    }\n})"],"mappings":";AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,IAAI,MAAM,MAAM;AACvB,OAAOC,QAAQ,MAAM,iBAAiB;AACtC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,YAAY,QAAQ,UAAU;AAEvCJ,GAAG,CAACK,GAAG,CAACJ,IAAI,CAAC;AAEb,eAAe,IAAIA,IAAI,CAACK,KAAK,CAAC;EAC1BC,KAAK,EAAE;IACHC,YAAY,EAAE,CACV;MAACC,SAAS,EAAE,CAAC;MAAEC,MAAM,EAAE;IAAC,CAAC,CAC5B;IACDC,aAAa,EAAE,IAAI;IACnBC,gBAAgB,EAAE;EACtB,CAAC;EACDC,SAAS,EAAE;IACPC,gBAAgBA,CAACP,KAAK,EAAE;MAACE,SAAS;MAAEC;IAAM,CAAC,EAAE;MACzC,MAAMK,IAAI,GAAGR,KAAK,CAACC,YAAY,CAACQ,IAAI,CAACD,IAAI,IAAIA,IAAI,CAACN,SAAS,KAAKA,SAAS,CAAC;MAC1E,IAAIM,IAAI,EAAE;QACNA,IAAI,CAACL,MAAM,IAAIA,MAAM;MACzB,CAAC,MACI;QACDH,KAAK,CAACC,YAAY,CAACS,IAAI,CAAC;UACpBR,SAAS;UACTC;QACJ,CAAC,CAAC;MACN;IAEJ,CAAC;IACDQ,uBAAuBA,CAACX,KAAK,EAAE;MAACE,SAAS;MAAEC;IAAM,CAAC,EAAE;MAChD,MAAMK,IAAI,GAAGR,KAAK,CAACC,YAAY,CAACQ,IAAI,CAACD,IAAI,IAAIA,IAAI,CAACN,SAAS,KAAKA,SAAS,CAAC;MAC1E,IAAIM,IAAI,EAAE;QACNA,IAAI,CAACL,MAAM,GAAGA,MAAM;MACxB;IACJ,CAAC;IACDS,iBAAiBA,CAACZ,KAAK,EAAEE,SAAS,EAAE;MAChCF,KAAK,CAACC,YAAY,GAAGD,KAAK,CAACC,YAAY,CAACY,MAAM,CAACL,IAAI,IAAIA,IAAI,CAACN,SAAS,KAAKA,SAAS,CAAC;IACxF,CAAC;IACDY,mBAAmBA,CAACd,KAAK,EAAEe,SAAS,EAAE;MAClCf,KAAK,CAACI,aAAa,GAAGW,SAAS;IACnC,CAAC;IACDC,sBAAsBA,CAAChB,KAAK,EAAEiB,KAAK,EAAE;MACjCjB,KAAK,CAACK,gBAAgB,GAAGY,KAAK;IAClC;EACJ,CAAC;EACDC,OAAO,EAAE;IACLC,kBAAkBA,CAACnB,KAAK,EAAE;MACtB,OAAOA,KAAK,CAACC,YAAY,CAACmB,GAAG,CAACZ,IAAI,IAAI;QAClC,OAAO;UACH,GAAGA,IAAI;UACPa,OAAO,EAAE1B,QAAQ,CAACc,IAAI,CAACa,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKf,IAAI,CAACN,SAAS;QACvD,CAAC;MACL,CAAC,CAAC;IACN,CAAC;IACDsB,cAAcA,CAACxB,KAAK,EAAEkB,OAAO,EAAE;MAC3B,OAAOA,OAAO,CAACC,kBAAkB,CAACM,MAAM,CAAC,CAACC,GAAG,EAAElB,IAAI,KAAMA,IAAI,CAACa,OAAO,CAACM,KAAK,GAAGnB,IAAI,CAACL,MAAM,GAAIuB,GAAG,EAAE,CAAC,CAAC;IACxG;EACJ,CAAC;EACDE,OAAO,EAAE;IACLC,QAAQA,CAACC,OAAO,EAAE;MACdlC,KAAK,CACAmC,GAAG,CAAClC,YAAY,GAAG,cAAc,EAAE;QAChCO,aAAa,EAAE0B,OAAO,CAAC9B,KAAK,CAACI;MACjC,CAAC,CAAC,CACD4B,IAAI,CAACC,QAAQ,IAAI;QACd,IAAI,CAACH,OAAO,CAAC9B,KAAK,CAACI,aAAa,EAAE;UAC9B8B,YAAY,CAACC,OAAO,CAAC,eAAe,EAAEF,QAAQ,CAACG,IAAI,CAACC,IAAI,CAACtB,SAAS,CAAC;UACnEe,OAAO,CAACQ,MAAM,CAAC,qBAAqB,EAAEL,QAAQ,CAACG,IAAI,CAACC,IAAI,CAACtB,SAAS,CAAC;QACvE;QACAe,OAAO,CAACQ,MAAM,CAAC,wBAAwB,EAAEL,QAAQ,CAACG,IAAI,CAACnB,KAAK,CAAC;MACjE,CAAC,CAAC;IACV;EACJ;AACJ,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}